/**************
 * SFS V3.56
 *  August 2nd 2020
 *  https://1.envato.market/sfs
 ***************/
 $(document).ready(function(){function d(e,t){for(i=0;i<t.length;i++)if(e==t[i])return 1}$('[data-toggle="tooltip"]').tooltip(),$.fn.copyCSS=function(e){var t=$(e).get(0),s={};if(window.getComputedStyle){function a(e,t){return t.toUpperCase()}for(var n,o=0,i=(n=window.getComputedStyle(t,null)).length;o<i;o++){var l=(d=n[o]).replace(/\-([a-z])/g,a),c=n.getPropertyValue(d);s[l]=c}return this.css(s)}if(n=t.currentStyle){for(var d in n)s[d]=n[d];return this.css(s)}if(n=t.style)for(var d in n)"function"!=typeof n[d]&&(s[d]=n[d]);return this.css(s)};var e,t,s,a=(s=document.location.pathname,t=!!s&&s.replace(/\\/g,"/").replace(/\/[^\/]*$/,""),!(e=!!t&&t.replace(/\\/g,"/").replace(/.*\//,""))||"download"!=e&&"filesgroup"!=e&&"ucp"!=e&&"gal"!=e?"":"../");function r(e){return e=parseInt(e),kb=1024,mb=1024*kb,gb=1024*mb,tb=1024*gb,pb=1024*tb,e<kb?e+" B":e<mb?Math.round(100*e/kb)/100+" KB":e<gb?Math.round(100*e/mb)/100+" MB":e<tb?Math.round(100*e/gb)/100+" GB":e<pb?Math.round(100*e/tb)/100+" TB":Math.round(100*e/pb)/100+" PB"}function n(e){return e<10?"0"+e:e}function u(e){return e<60?"00:"+n(e):e<3600?n(parseInt(e/60))+":"+n(parseInt(e%60)):parseInt(e/3600)+":"+n(parseInt(e%3600/60))+":"+n(parseInt(e%60))}var p,o,l,c,f,m,h,b,y=!1;function g(e,t){for(var s=e.split("?")[1].split("&"),a=0;a<s.length;a++){var n=s[a].split("=");if(n[0]==t)return n[1].replace(/#.*$/,"")}}$(document).width()<768&&(y=!0),$("a.open-link-external").click(function(){return window.open($(this).attr("href")),!1}),$.ajax({url:a+"js.vars.php",type:"post",data:{return:"json"},dataType:"json",async:!1,success:function(e){p=e}}),$("form#contactf").submit(function(){$("#cnote").slideUp();var e=$(this).serialize();return $.ajax({type:"POST",url:"functions.ajax.php",data:e,success:function(e){"OK"==e?($("#cnote").html('<div class="alert alert-success">'+p.lang_success_mess_sent+"</div>"),$("#cnote").slideDown(),$("form#contactf").fadeOut()):($("#cnote").html(e),$("#cnote").slideDown())}}),!1}),$("#fileupload").length&&(p.isMSIE&&p.MSIE_version<9&&($(".fileinput-button input").fadeTo(0,1),$(".fileinput-button span").text("")),1<p.maxRcpt&&($("input.js-tagsinput").tagsinput({tagClass:function(e){var t="label label-primary text-white";return $.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"validateEmail",email:e},success:function(e){t=e.isValid?"bg-success label text-success":"bg-danger label text-danger"}}),t},confirmKeys:[13,44,32],maxTags:p.maxRcpt}),p.isMSIE||$(".bootstrap-tagsinput").copyCSS($("input[name='mailFrom']")).css({"min-height":$("input[name='mailFrom']").css("height"),height:"auto"}),$(".bootstrap-tagsinput input").on("keydown",function(){$(this).css("width",$(this).val().length+"em")})),$.fn.followLink=function(){var e=$(this).closest("div").parent().find("input").val();return $(this).closest(".dropdown-menu").dropdown("toggle"),window.open(e),!1},$.fn.generateQRCode=function(){var e=$(this).closest("div").parent().find("input").val();return bootbox.alert({title:p.lang_hl_qr_code,message:'<p class="text-center"><img src="https://chart.googleapis.com/chart?chs=150&amp;cht=qr&amp;chl='+encodeURI(e)+'&amp;choe=UTF-8&amp;chld=|0" alt="'+e+'" />'}),$(this).closest(".dropdown-menu").dropdown("toggle"),!1},$.fn.shortenURL=function(){if($(this).hasClass("js-URL-shortened"))return!1;$(this).addClass("js-URL-shortened");var e=$(this).closest("div").parent().find("input").val(),t=$(this).closest("div").parent().find("input"),s=$(this);return $.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"shortenURL",url:e},success:function(e){e.error?new PNotify({title:p.lang_errors_occurred,text:e.error,type:"error"}):($(t).val(e.shortURL),$(s).html("<s class='text-muted'>"+$(s).html()+"</s>"))}}),$(this).closest(".dropdown-menu").dropdown("toggle"),!1},$.fn.ENcopy2Clipboard=function(){var e;Clipboard.isSupported()?((e=new Clipboard("li.js-clipboard-holder a",{text:function(e){return $(e).closest("div").parent().find("input").val()}})).on("success",function(e){new PNotify({title:"Copy success",text:"successfully added <code>"+e.text+"</code> to your clipboard",type:"success",width:"auto"}),e.clearSelection()}),e.on("error",function(e){new PNotify({title:"Copy Issues",text:"Please use <kbd>CTRL</kbd>+<kbd>C</kbd> to copy the URL to your clipboard",type:"info",width:"auto"})})):$("li.js-clipboard-holder").hide()},$.fn.shareOnFacebook=function(){var e="https://www.facebook.com/sharer.php?u="+$(this).closest("div").parent().find("input").val();return window.open(e,p.isMSIE&&p.MSIE_version<9?"":"SFS-FB-Sharing","left=100,top=100,width=600,height=400,personalbar=0,toolbar=0,scrollbars=1,resizable=1"),$(this).closest(".dropdown-menu").dropdown("toggle"),!1},$.fn.shareOnTwitter=function(){var e=$(this).closest("div").parent().find("input").val(),t="https://twitter.com/intent/tweet?url="+encodeURI(e)+"&amp;text=Check out my new upload on "+$($.parseHTML(p.siteName)).text();return window.open(t,p.isMSIE&&p.MSIE_version<9?"":"SFS-Twitter-Sharing","left=100,top=100,width=600,height=400,personalbar=0,toolbar=0,scrollbars=1,resizable=1"),$(this).closest(".dropdown-menu").dropdown("toggle"),!1},$(document).bind("drop dragover",function(e){e.preventDefault()}),$(function(){var i,l,o,c=0;$("#fileupload,.js-btn-remote-url").fileupload({formData:{u_key:$("input[name='u_key']").val()},add:function(e,t){var a=new Array,n=new Array,o=new Array;if($.each(t.originalFiles,function(e,t){var s=t.name.split(".").pop().toLowerCase();p.extDenied.length&&s&&d(s,p.extDenied)&&a.push(t.name),p.extAllowed.length&&s&&!d(s,p.extAllowed)&&o.push(t.name),t.size>p.maxFileSizeB&&n.push(t.name)}),$("#singleUploader").is(":hidden")){if(!p.addAnotherFiles)return new PNotify({title:"Upload Error",text:p.lang_error_continue_session,type:"error"}),!1;$("#singleUploadSucceeded,#multiUploadSucceeded").slideUp(function(){$("#singleUploader").slideDown(),$(".js-btn-backto").fadeIn(),$(".cancelUpload,.progress,.speedIndicator").hide(),$(".fileinput-button,#uploadInfo").show()})}if(filesCount=t.originalFiles.length,!p.multiUpload&&1<filesCount)return new PNotify({title:"File Count Error",text:p.lang_error_just_one_file,type:"error"}),1==l&&$(".js-btn-backto").fadeIn(),!1;if(p.multiUpload&&filesCount>p.maxMultiFiles)return new PNotify({title:"File Count Error",text:p.lang_error_max_files,type:"error"}),1==l&&$(".js-btn-backto").fadeIn(),!1;if(n.length)return 1<filesCount?new PNotify({title:"File Size Error",text:p.lang_error_max_size_multi+n.join(", "),type:"error"}):new PNotify({title:"File Size Error",text:p.lang_error_max_size,type:"error"}),1==l&&$(".js-btn-backto").fadeIn(),!1;if(a.length)return 1<filesCount?new PNotify({title:"File Extension Error",text:p.lang_error_extension_denied_multi+a.join(", "),type:"error"}):new PNotify({title:"File Extension Error",text:p.lang_error_extension_denied,type:"error"}),1==l&&$(".js-btn-backto").fadeIn(),!1;if(o.length)return 1<filesCount?new PNotify({title:"File Extension Error",text:p.lang_error_extension_denied_multi+o.join(", "),type:"error"}):new PNotify({title:"File Extension Error",text:p.lang_error_extension_denied,type:"error"}),1==l&&$(".js-btn-backto").fadeIn(),!1;var s=t.submit();$("button.cancelUpload").click(function(e){if(c++,1==l&&$(".js-btn-backto").fadeIn(),void 0!==s)return s.abort(),c||new PNotify({title:"Upload Aborted",type:"warning"}),!1})},start:function(e){l=parseInt($("input[name='filesUpped']").val()),o=parseInt($("input[name='filesUppedTotal']").val()),i=(new Date).getTime(),$(".js-btn-backto").fadeOut(),$(".fileinput-button").fadeOut(function(){$(".cancelUpload").fadeIn()}),$("#uploadInfo").slideUp(function(){$(".progress,.speedIndicator").fadeIn()})},dataType:"json",progressall:function(e,t){var s=parseInt(t.loaded/t.total*100,10);$(".progress .progress-bar").css("width",s+"%"),s<20?$(".progress .progress-bar").not(".progress-bar-danger").addClass("progress-bar-danger"):s<40?$(".progress .progress-bar").not(".progress-bar-warning").addClass("progress-bar-warning").removeClass("progress-bar-danger"):s<60?$(".progress .progress-bar").not(".progress-bar-info").addClass("progress-bar-info").removeClass("progress-bar-warning"):s<80?$(".progress .progress-bar").not(".progress-bar-primary").addClass("progress-bar-primary").removeClass("progress-bar-info"):$(".progress .progress-bar").not(".progress-bar-success").addClass("progress-bar-success").removeClass("progress-bar-primary");var a=((new Date).getTime()-i)/1e3,n=parseInt(t.total/(t.loaded/a)),o=r(t.loaded/a)+"/s";s<99?$("div.visible-xs").is(":visible")?$(".progress .pct").html(r(t.loaded)+" / "+r(t.total)):$(".progress .pct").html(s+"% <small>"+r(t.loaded)+" / "+r(t.total)+" </small>"):($(".progress .pct").html(p.lang_descr_finishing_upload),$(".progress .progress-bar").css("width","100%")),$(".speedIndicator span.upload-speed").text(o),$(".speedIndicator span.upload-time").text(u(parseInt(a))+" / "+u(n))},stop:function(){c?($(".progress,button.cancelUpload,.speedIndicator").fadeOut(function(){$(".fileinput-button").fadeIn(),$("#uploadInfo").slideDown()}),c=0):($("#landingInfoRow").fadeOut(),(1<filesCount||0<l)&&$("#singleUploader").fadeOut(function(){$("#multiUploadSucceeded").fadeIn()}),$("input[name='filesUppedTotal']").val(o),$("input[name='filesUpped']").val(1),$(document).ENcopy2Clipboard())},done:function(e,t){c||$.each(t.result.files,function(e,t){var s,a,n;t.error?(new PNotify({title:"Upload API error",text:t.error,type:"error"}),$(".cancelUpload").trigger("click")):(o++,new PNotify({title:"Upload success",text:t.realName+" upped",type:"success"}),s=p.shortUrlbaseDownloadUrl+t.fileKey,a=p.baseDeleteUrl+t.delFileKey+".html",0==l&&1==filesCount&&($("#singleUploadSucceeded .susFName .js-susDataHeadline").html(t.realName+' <i class="small">'+t.niceSize+"</i>"),$("#singleUploadSucceeded input[name='susDownloadLink']").val(s),$("#singleUploadSucceeded input[name='susDeleteLink']").val(a),$("#singleUploadSucceeded button.btndown").click(function(){return window.open(s),!1}),$("#singleUploadSucceeded button.btndel").click(function(){return window.open(a),!1}),$("#singleUploadSucceeded .js-follow-link").click(function(){return $(this).followLink()}),$("#singleUploadSucceeded .js-generate-QR").click(function(){return $(this).generateQRCode()}),$("#singleUploadSucceeded .js-shorten-URL").click(function(){return $(this).shortenURL()}),$("#singleUploadSucceeded .js-share-facebook").click(function(){return $(this).shareOnFacebook()}),$("#singleUploadSucceeded .js-share-twitter").click(function(){return $(this).shareOnTwitter()}),y&&$("#singleUploadSucceeded .input-group").removeClass("input-group-lg"),$("#singleUploader").fadeOut(function(){$("#singleUploadSucceeded").fadeIn()})),n=$("#multiUploadSucceeded .multiItem.js-hide").clone(),$(n).find(".musFName .js-musDataHeadline").html(t.realName+' <i class="small">'+t.niceSize+"</i>"),$(n).removeClass("js-hide"),$(n).find("input[name='musDownloadLink']").val(s),$(n).find("input[name='musDeleteLink']").val(a),$(n).find("button.btndown").click(function(){return window.open(s),!1}),$(n).find("button.btndel").click(function(){return window.open(a),!1}),$(n).find("input[name='musDownloadLink']").click(function(){$(this).select()}),$(n).find("input[name='musDeleteLink']").click(function(){$(this).select()}),$(n).find(".js-follow-link").click(function(){return $(this).followLink()}),$(n).find(".js-generate-QR").click(function(){return $(this).generateQRCode()}),$(n).find(".js-shorten-URL").click(function(){return $(this).shortenURL()}),$(n).find(".js-share-facebook").click(function(){return $(this).shareOnFacebook()}),$(n).find(".js-share-twitter").click(function(){return $(this).shareOnTwitter()}),$("#multiUploadSucceeded .multiItem.multiItemFirst").length||$(n).addClass("multiItemFirst"),$("#multiUploadSucceeded .multiItems").append(n),y&&$("#multiUploadSucceeded .input-group").removeClass("input-group-lg"))})}}).on("fileuploaddrop",function(e,t){return 0==p.addAnotherFiles&&0<o?(new PNotify({title:"Upload Error",text:p.lang_error_continue_session,type:"error"}),!1):0==p.multiUpload&&1<t.files.length?(new PNotify({title:"File Count Error",text:p.lang_error_just_one_file,type:"error"}),!1):1==p.multiUpload&&t.files.length>p.maxMultiFiles?(new PNotify({title:"File Count Error",text:p.lang_error_max_files,type:"error"}),!1):void 0}),$("#singleUploadSucceeded input[name='susDownloadLink'],#singleUploadSucceeded input[name='susDeleteLink'],#multiUploadSucceeded input[name='musGroupLink']").click(function(){$(this).select()}),$("#multiUploadSucceeded button.btngrp").click(function(){return window.open($("#multiUploadSucceeded input[name='musGroupLink']").val()),!1}),$("#multiUploadSucceeded .js-follow-link").click(function(){return $(this).followLink()}),$("#multiUploadSucceeded .js-generate-QR").click(function(){return $(this).generateQRCode()}),$("#multiUploadSucceeded .js-shorten-URL").click(function(){return $(this).shortenURL()}),$("#multiUploadSucceeded .js-share-facebook").click(function(){return $(this).shareOnFacebook()}),$("#multiUploadSucceeded .js-share-twitter").click(function(){return $(this).shareOnTwitter()}),$("#multiUploadSucceeded .js-shorten-URL-all").click(function(){return $("#multiUploadSucceeded .js-shorten-URL").each(function(){$(this).trigger("click")}),!1}),$("#agree2terms").change(function(){$(this).is(":checked")?$(".sendLinkInfo").attr("disabled",!1):$(".sendLinkInfo").attr("disabled",!0)}),$("#agree2termsMulti").change(function(){$(this).is(":checked")?$(".sendLinkInfoMulti").attr("disabled",!1):$(".sendLinkInfoMulti").attr("disabled",!0)}),$("a[href='#terms']").click(function(){return bootbox.dialog({message:$("#terms").html(),buttons:{cancel:{className:"btn-default",label:"OK",callback:function(){bootbox.hideAll()}}}}),!1}),$(".addmessage").on("click",function(){return $(this).fadeOut("fast",function(){$(this).closest(".row").find(".js-message-wrapper").fadeIn()}),!1}),$(".sendLinkInfo").on("click",function(){var t=$(this);$("#singleUploadSucceeded .sendLinkMsgs").hide();var e=$("#singleUploadSucceeded input[name='susDownloadLink']").val(),s=$("#singleUploadSucceeded input[name='susDeleteLink']").val(),a=$("#singleUploadSucceeded input[name='mailFrom']").val(),n=$("#singleUploadSucceeded input[name='mailTo']").val(),o=$("#singleUploadSucceeded textarea[name='message']").val(),i=$("input[name='u_key']").val(),l=$("#singleUploadSucceeded input[name='show_message']").is(":checked")?1:0;return n&&a?($(t).attr("disabled",!0),$(t).find("i").removeClass("fa-send").addClass("fa-circle-o-notch fa-spin"),$.ajax({type:"POST",url:"functions.ajax.php",data:{action:"sendFileInfo",DownLink:e,DelLink:s,mailFrom:a,mailTo:n,message:o,show_message:l,u_key:i},success:function(e){$(t).attr("disabled",!1),$(t).find("i").addClass("fa-send").removeClass("fa-circle-o-notch fa-spin"),"OK"==e?($("#sendLinkInfoForm").append("<div class='alert alert-success js-hide span8 mt20 successmess'><button type='button' class='close'>&times;</button>"+p.lang_success_info_sent+"</div>"),$("#sendLinkInfoForm form").fadeOut(function(){$("#sendLinkInfoForm .successmess").fadeIn()}),$("#singleUploadSucceeded .close").on("click",function(){$("#singleUploadSucceeded input[name='mailFrom'],#singleUploadSucceeded input[name='mailTo'],#singleUploadSucceeded textarea[name='message']").val(""),$("#singleUploadSucceeded .js-message-wrapper").fadeOut(),$("#singleUploadSucceeded #agree2terms, #singleUploadSucceeded input[name='show_message']").attr("checked",!1),$("#singleUploadSucceeded .sendLinkInfo").attr("disabled",!0),$(this).parent().fadeOut(),$("#singleUploadSucceeded .addmessage").fadeIn(),$("#sendLinkInfoForm form").fadeIn(),$(this).parent().remove()}),1<p.maxRcpt&&$("input.js-tagsinput").tagsinput("removeAll")):($("#singleUploadSucceeded .sendLinkMsgs").text(e),$("#singleUploadSucceeded .sendLinkMsgs").fadeIn())}})):($("#singleUploadSucceeded .sendLinkMsgs").text(p.lang_error_both_fields_required),$("#singleUploadSucceeded .sendLinkMsgs").fadeIn()),!1}),$(".sendLinkInfoMulti").on("click",function(){var t=$(this);$("#multiUploadSucceeded .sendLinkMsgs").hide();var e=$("#sendLinkInfoFormMulti input[name='mailFrom']").val(),s=$("#sendLinkInfoFormMulti input[name='mailTo']").val(),a=$("#sendLinkInfoFormMulti textarea[name='message']").val(),n=$("#sendLinkInfoFormMulti input[name='multi_u_key']").val(),o=$("#sendLinkInfoFormMulti input[name='show_message']").is(":checked")?1:0;return s&&e?($(t).attr("disabled",!0),$(t).find("i").removeClass("fa-send").addClass("fa-circle-o-notch fa-spin"),$.ajax({type:"POST",url:"functions.ajax.php",data:{action:"sendMultiFileInfo",u_key:n,mailFrom:e,mailTo:s,message:a,show_message:o},success:function(e){$(t).attr("disabled",!1),$(t).find("i").addClass("fa-send").removeClass("fa-circle-o-notch fa-spin"),"OK"==e?($("#sendLinkInfoFormMulti").append("<div class='alert alert-success js-hide span8 mt20 successmess'><button type='button' class='close'>&times;</button>"+p.lang_success_info_sent+"</div>"),$("#sendLinkInfoFormMulti form").fadeOut(function(){$("#sendLinkInfoFormMulti .successmess").fadeIn()}),$("#multiUploadSucceeded .close").on("click",function(){$("#multiUploadSucceeded input[name='mailFrom'],#multiUploadSucceeded input[name='mailTo'],#multiUploadSucceeded textarea[name='message']").val(""),$("#multiUploadSucceeded .js-message-wrapper").fadeOut(),$("#agree2termsMulti, #multiUploadSucceeded input[name='show_message']").attr("checked",!1),$(".sendLinkInfoMulti").attr("disabled",!0),$(this).parent().fadeOut(),$("#multiUploadSucceeded .addmessage").fadeIn(),$("#sendLinkInfoFormMulti form").fadeIn(),$(this).parent().remove()}),1<p.maxRcpt&&$("input.js-tagsinput").tagsinput("removeAll")):($("#multiUploadSucceeded .sendLinkMsgs").text(e),$("#multiUploadSucceeded .sendLinkMsgs").fadeIn())}})):($("#multiUploadSucceeded .sendLinkMsgs").text(p.lang_error_both_fields_required),$("#multiUploadSucceeded .sendLinkMsgs").fadeIn()),!1})})),$("#loginF").length&&($("input[name='user']").val()?$("input[name='pass']").focus():$("input[name='user']").focus()),$("table#filesDataTable").length&&($.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:-1===e._iDisplayLength?0:Math.ceil(e._iDisplayStart/e._iDisplayLength),iTotalPages:-1===e._iDisplayLength?0:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}},o="135px",$("body#BS-cosmo,body#BS-journal,body#BS-readable,body#BS-superhero").length?o="145px":$("body#BS-yeti").length&&(o="155px"),l=$("#filesDataTable").dataTable({bProcessing:!0,bServerSide:!0,sAjaxSource:"admin.files.data.php",aaSorting:[[0,"desc"]],sDom:"<'row mb20'<'col-sm-6'l><'col-sm-6'f>r>t<'row'<'col-sm-6'i><'col-sm-6'p>>",sPaginationType:"bootstrap",oLanguage:{sProcessing:"<i class='fa fa-clock-o'></i> Loading Files Data"},aoColumns:[{sWidth:"50px"},{},{sWidth:"120px"},{sWidth:"180px"},{sWidth:"100px"},{sWidth:o,sClass:"tac"}],aoColumnDefs:[{bSearchable:!1,aTargets:[0,2]},{bSortable:!1,aTargets:[0,5]}],fnDrawCallback:function(){1==$(".js-btn-showhide-cleanup-info").data("show")&&$("table#filesDataTable div.cleanup-info").show(),$("#filesDataTable tr>td:first-child + td").each(function(){$(this).attr("title",$(this).find("span").html())}),$("#filesDataTable tr>td:first-child + td").tooltip({container:"body",html:!0}),$(".dataTables_filter input").attr("placeholder","minlength:3"),$(".delFile").click(function(){var t=l.fnGetPosition($(this).closest("tr").get(0)),s=g($(this).attr("href"),"fid"),a=$(this).closest("tr");function n(e,s){$.ajax({type:"POST",url:"functions.ajax.php",data:{action:"delFile",fid:e},success:function(e){var t;"OK"==e?(new PNotify({title:"Operations completed",text:"The file was removed successfully.",type:"success"}),t=l.fnPagingInfo().iPage,l.fnDeleteRow(s,function(){l.fnPageChange(t)},!1)):new PNotify({title:p.lang_errors_occurred,text:e,type:"error"})}})}return $(a).addClass("warning"),$("#TempbypassConfirming").is(":checked")?n(s,t):bootbox.confirm("<h4>Are you sure to delete this file?</h4><p>This Action cannot be undone!<br /><div class='checkbox'><label class='checkbox'><input type='checkbox' name='bypassConfirming' id='bypassConfirming' value='1' />Don't ask again for this action for the next times.</label></div></p>",function(e){e?($("#bypassConfirming").is(":checked")&&$("#TempbypassConfirming").prop("checked",!0),n(s,t)):$(a).removeClass("warning")}),!1}),$(".js-btn-lockFile").click(function(){l.fnGetPosition($(this).closest("tr").get(0));var t=$(this).attr("href"),e=g(t,"fid"),s=g(t,"action"),a=$(this).closest("tr"),n=this;return $(a).addClass("warning"),$.ajax({type:"POST",url:"functions.ajax.php",data:{action:"handleFileLock",lockAction:s,fid:e},success:function(e){"OK"==e?(new PNotify({title:"Operations completed",text:"lockFile"==s?"The file was locked successfully.":"The file was unlocked successfully.",type:"success",before_close:function(){$(a).removeClass("warning")}}),"lockFile"==s?($(n).addClass("btn-warning").removeClass("btn-default").attr({href:t.replace("=lockFile","=unlockFile"),title:"PROTECTED: click to enable autodeletion of this file"}),$(n).find("i").addClass("fa-unlock").removeClass("fa-lock")):"unlockFile"==s&&($(n).addClass("btn-default").removeClass("btn-warning").attr({href:t.replace("=unlockFile","=lockFile"),title:"NOT PROTECTED: click to protect from autodeleting this file"}),$(n).find("i").addClass("fa-lock").removeClass("fa-unlock"))):new PNotify({title:p.lang_errors_occurred,text:e,type:"error"})}}),!1}),$(".js-adm-get-qrcode").click(function(){var e=$(this).data("url");return bootbox.alert({title:p.lang_hl_qr_code,message:'<p class="text-center"><img src="https://chart.googleapis.com/chart?chs=150&amp;cht=qr&amp;chl='+encodeURI(e)+'&amp;choe=UTF-8&amp;chld=|0" alt="'+e+'" />'}),!1})}}),$(".js-btn-showhide-cleanup-info").click(function(){1==$(this).data("show")?($("table#filesDataTable div.cleanup-info").slideUp(),$(this).data("show",0)):($("table#filesDataTable div.cleanup-info").slideDown(),$(this).data("show",1))}),$("div.dataTables_filter input,div.dataTables_wrapper select").addClass("form-control input-sm")),$(".flot").length&&($.ajax({url:"admin.charts.data.php",type:"get",dataType:"json",async:!1,success:function(e){c=e}}),null!=c.pieData&&$.plot($("#filetypes .flot"),c.pieData,{grid:{hoverable:!1},series:{pie:{show:!0,radius:1,tilt:.5,innerRadius:.5,label:{show:!0,background:{color:"#fff",opacity:.8},formatter:function(e){return"<div class='flotdescr'>"+e+"</div>"}}}},yaxis:{tickDecimals:0,max:6214.8},legend:{noColumns:4,margin:0,backgroundColor:"#efefef"}}),null!=c.lineData&&($("#updownloads").css("padding","0 25px"),$.plot($("#updownloads .flot"),c.lineData,{xaxis:{ticks:c.lineXticks,tickDecimals:0}}),$(".flot-periodizer select").change(function(){var t,e=$(this).val(),s=$(this).data("unit");e&&($.ajax({url:"admin.charts.data.php",data:{period:e,unit:s},type:"get",dataType:"json",async:!1,success:function(e){t=e,$.plot($("#updownloads .flot"),t.lineData,{xaxis:{ticks:t.lineXticks,tickDecimals:0}})}}),$(".flot-periodizer select").not(this).val(""))})),f=0,$(".SFSCharts div.panel-collapse").each(function(){f&&$(this).removeClass("in"),f++})),$(".btn-download #dlCD").length&&0<p.downloadSeconds&&($(".btn-download").click(function(){if($(this).hasClass("disabled"))return!1}),m=$(".btn-download"),h=$(".btn-download .dwnin"),$("#dlCD span").countDown({startFontSize:8,endFontSize:17.5,startNumber:p.downloadSeconds,callBack:function(e){$(m).removeClass("disabled").addClass("btn-success").removeClass("btn-warning"),$(m).find("i").attr("class","fa fa-download fa-fw"),$(h).text("Download")}})),$("input#passwordProtection").change(function(){$(".susPassword").removeClass("muted text-info text-danger").hide();var e=$(this).is(":checked"),t=$("input[name='susDownloadLink']").val();$.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"pwdProtection",downloadLink:t,protection:e},success:function(e){e.error?($(".susPassword").text(e.error),$(".susPassword").addClass("text-danger").fadeIn()):($(".susPassword").text(e.statmess),1==e.protection?$(".susPassword").addClass("text-info").fadeIn():$(".susPassword").addClass("muted").fadeIn())}})}),$(".btn-download.pwd-protected").click(function(){if($(this).hasClass("disabled"))return!1;var s=$(this).attr("href");return bootbox.dialog({title:p.lang_password_modal_hl,message:"<div class='form-inline'><div class='text-center pwdChecker'><div class='alert alert-danger js-hide'></div><input type='password' name='password' placeholder='"+p.lang_password_modal_placeholder+"' required class='form-control input-lg'/></div></div>",buttons:{cancel:{label:p.lang_cancel,className:"btn-default",callback:function(){bootbox.hideAll()}},verify:{label:p.lang_verify_pwd,className:"btn-primary submitData",callback:function(){$(".pwdChecker .alert").hide();var t=!1,e=$(".modal-body input[name='password']").val();return e?$.ajax({type:"POST",url:a+"functions.ajax.php",dataType:"json",async:!1,data:{action:"verifyPwd",downloadLink:s,pwd:e},success:function(e){e.error?$(".pwdChecker .alert").text(e.error).fadeIn():e.verified?(window.location.href=s,t=!0):$(".pwdChecker .alert").text("something went wrong?!?").fadeIn()}}):$(".pwdChecker .alert").text(p.lang_error_enter_password).fadeIn(),t}}}}),!1}),$("form#abusef").submit(function(){$("#cnote").slideUp();var e=$(this).serialize();return $.ajax({type:"POST",url:"functions.ajax.php",data:e,success:function(e){"OK"==e?($("#cnote").html('<div class="alert alert-success">'+p.lang_success_mess_sent+"</div>"),$("#cnote").slideDown(),$("form#abusef").fadeOut()):($("#cnote").html(e),$("#cnote").slideDown())}}),!1}),$("input#passwordProtectionMulti").change(function(){$(".musPassword").removeClass("muted text-danger text-info").hide();var e=$(this).is(":checked"),t=$("input[name='u_key']").val();$.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"pwdProtectionMulti",u_key:t,protection:e},success:function(e){e.error?($(".musPassword").text(e.error),$(".musPassword").addClass("text-danger").fadeIn()):($(".musPassword").text(e.statmess),1==e.protection?$(".musPassword").addClass("text-info").fadeIn():$(".musPassword").addClass("muted").fadeIn())}})}),$(".filesgroup input.gDownloadLink").click(function(){$(this).select()}),$(".filesgroup button.btndown").click(function(){var e=$(this).closest("div").parent().find("input").val();return $(this).closest(".dropdown-menu").dropdown("toggle"),window.open(e),!1}),$(window).bind("beforeunload",function(e){if($("#singleUploadSucceeded,#multiUploadSucceeded").is(":visible"))return p.lang_leaving_site_info}),$(".download-button-wrapper .btn-download").click(function(){return!$(this).hasClass("disabled")&&($(this).addClass("disabled btn-default").html(p.lang_download_has_started).removeClass("btn-success").blur(),!!$(this).hasClass("pwd-protected")||(!p.isMSIE||(window.location.href=$(this).attr("href"),!1)))}),$(".delXdays,.delXdownloads").fadeTo(0,.5),$("select[name='delXdays']").change(function(){var e=$(this).val(),t=$("input[name='susDownloadLink']").val();$(".delXdays").fadeTo("fast",-1==e?.5:1),$.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"setDelXdays",downloadLink:t,delXdays:e},success:function(e){e.error&&($(".delXdays").text(e.error),$(".delXdays").addClass("text-danger").fadeIn())}})}),$("select[name='delXdownloads']").change(function(){var e=$(this).val(),t=$("input[name='susDownloadLink']").val();$(".delXdownloads").fadeTo("fast",-1==e?.5:1),$.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"setDelXdownloads",downloadLink:t,delXdownloads:e},success:function(e){e.error&&($(".delXdownloads").text(e.error),$(".delXdownloads").addClass("text-danger").fadeIn())}})}),$(".delXdaysMulti,.delXdownloadsMulti").fadeTo(0,.5),$("select[name='delXdaysMulti']").change(function(){var e=$(this).val(),t=$("input[name='u_key']").val();$(".delXdaysMulti").fadeTo("fast",-1==e?.5:1),$.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"setDelXdaysMulti",u_key:t,delXdays:e},success:function(e){e.error&&($(".delXdaysMulti").text(e.error),$(".delXdaysMulti").addClass("text-danger").fadeIn())}})}),$("select[name='delXdownloadsMulti']").change(function(){var e=$(this).val(),t=$("input[name='u_key']").val();$(".delXdownloadsMulti").fadeTo("fast",-1==e?.5:1),$.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"setDelXdownloadsMulti",u_key:t,delXdownloads:e},success:function(e){e.error&&($(".delXdownloadsMulti").text(e.error),$(".delXdownloadsMulti").addClass("text-danger").fadeIn())}})}),$(".btn-captcha-refresh").click(function(){var e;$(".img-captcha").length&&(e=$(".img-captcha").attr("src").replace(/\?.*$/,""),$(".img-captcha").fadeTo(500,0,function(){$(".img-captcha").attr("src",e+"?"+(new Date).getTime()).load(function(){$(".img-captcha").fadeTo(500,1)})}))}),$.fn.reStyleDFNAME=function(){var e=$(".dfname").closest("div[class^=col-]").width()-40,t=$(".dfname").html().replace(/<small.*$/,"").split(".").pop().toLowerCase();$(".dfname").attr("style","text-overflow:'..."+t+"';max-width:"+e+"px;")},$(".dfname").length&&($(".dfname").reStyleDFNAME(),$(window).resize(function(){$(".dfname").reStyleDFNAME()})),$(".js-truncate-width").length&&$(window).on("load resize",function(e){$(".filename-truncate strong").fadeOut(0,function(){$(".filename-truncate strong").width($(".js-truncate-width").width()).fadeIn()})}),$("#multiUploadSucceeded .js-btn-add-files").click(function(){return $("#multiUploadSucceeded").fadeOut(function(){$("#singleUploader").fadeIn()}),$(".cancelUpload").fadeOut(function(){$(".fileinput-button").fadeIn()}),$(".progress,.speedIndicator").fadeOut(function(){$("#uploadInfo").slideDown()}),$("input[name='backto']").val("multi"),$(".js-btn-backto").fadeIn(),!1}),$("#singleUploadSucceeded .js-btn-add-files").click(function(){return $("#singleUploadSucceeded").fadeOut(function(){$("#singleUploader").fadeIn()}),$(".cancelUpload").fadeOut(function(){$(".fileinput-button").fadeIn()}),$(".progress,.speedIndicator").fadeOut(function(){$("#uploadInfo").slideDown()}),$("input[name='backto']").val("single"),$(".js-btn-backto").fadeIn(),!1}),$(".js-btn-backto").click(function(){$("#singleUploader").fadeOut(function(){"single"==$("input[name='backto']").val()?$("#singleUploadSucceeded").fadeIn():$("#multiUploadSucceeded").fadeIn()})}),$("#singleUploadSucceeded .js-btn-add-file-description").on("click",function(){var t,s=this;return $(this).hasClass("btn-primary")?$("#singleUploadSucceeded .js-file-description-wrapper").slideDown(400,function(){$(s).find("span").text(p.lang_remove_file_description),$(s).removeClass("btn-primary").addClass("btn-default"),$("#singleUploadSucceeded input[name='susFileDescription']").focus()}):$(this).hasClass("btn-default")&&(t=0,$(".js-file-description-wrapper").slideUp(400,function(){$("#singleUploadSucceeded input[name='susFileDescription']").val(""),$(".js-btn-save-file-description").addClass("disabled btn-default").removeClass("btn-primary"),$(s).find("span").text(p.lang_add_file_description),$(s).addClass("btn-primary").removeClass("btn-default");var e=$("input[name='susDownloadLink']").val();t++||$.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"updateFileDescription",downloadLink:e,fileDescription:""},success:function(e){e.error?new PNotify({title:p.lang_errors_occurred,text:e.error,type:"error"}):(new PNotify({text:p.lang_success_removed_file_description,type:"success"}),$("#multiUploadSucceeded .multiItem.multiItemFirst input[name='musFileDescription']").val(""),$("#multiUploadSucceeded .multiItem.multiItemFirst .js-file-description-wrapper").addClass("js-hide"),$("#multiUploadSucceeded .multiItem.multiItemFirst .js-btn-add-file-description").find("span").text(p.lang_add_file_description),$("#multiUploadSucceeded .multiItem.multiItemFirst .js-btn-add-file-description").removeClass("btn-default").addClass("btn-primary"))}})})),!1}),$("#singleUploadSucceeded input[name='susFileDescription']").on("input",function(){$("#singleUploadSucceeded .js-btn-save-file-description").hasClass("disabled")&&$("#singleUploadSucceeded .js-btn-save-file-description").removeClass("disabled btn-default").addClass("btn-primary")}),$("#singleUploadSucceeded input[name='susFileDescription']").on("keydown",function(e){$("#singleUploadSucceeded .js-btn-save-file-description").hasClass("disabled")||13!=e.keyCode||$("#singleUploadSucceeded .js-btn-save-file-description").trigger("click")}),$("#singleUploadSucceeded .js-btn-save-file-description").on("click",function(){var e=$("#singleUploadSucceeded input[name='susFileDescription']").val(),t=$("input[name='susDownloadLink']").val();return $.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"updateFileDescription",downloadLink:t,fileDescription:e},success:function(e){e.error?new PNotify({title:p.lang_errors_occurred,text:e.error,type:"error"}):(new PNotify({text:p.lang_success_updated_file_description,type:"success"}),$("#multiUploadSucceeded .multiItem.multiItemFirst input[name='musFileDescription']").val(e.descr_long),$("#multiUploadSucceeded .multiItem.multiItemFirst .js-file-description-wrapper").removeClass("js-hide"),$("#multiUploadSucceeded .multiItem.multiItemFirst .js-btn-add-file-description").find("span").text(p.lang_remove_file_description),$("#multiUploadSucceeded .multiItem.multiItemFirst .js-btn-add-file-description").removeClass("btn-primary").addClass("btn-default"),$("#singleUploadSucceeded .js-btn-save-file-description").removeClass("btn-primary").addClass("btn-success"),$("#singleUploadSucceeded .js-btn-save-file-description i").removeClass("fa-save").addClass("fa-check"),setTimeout(function(){$("#singleUploadSucceeded .js-btn-save-file-description").addClass("disabled btn-default").removeClass("btn-success"),$("#singleUploadSucceeded .js-btn-save-file-description i").addClass("fa-save").removeClass("fa-check")},750))}}),!1}),$("#multiUploadSucceeded").on("click",".js-btn-add-file-description",function(){var t=this,s=$(this).closest(".multiItem");return $(this).hasClass("btn-primary")&&$(s).find(".js-file-description-wrapper").slideDown(400,function(){$(t).find("span").text(p.lang_remove_file_description),$(t).removeClass("btn-primary").addClass("btn-default"),$(s).find("input[name='musFileDescription']").focus()}),$(this).hasClass("btn-default")&&$(s).find(".js-file-description-wrapper").slideUp(400,function(){$(s).find("input[name='musFileDescription']").val(""),$(s).find(".js-btn-save-file-description").addClass("disabled btn-default").removeClass("btn-primary"),$(t).find("span").text(p.lang_add_file_description),$(t).addClass("btn-primary").removeClass("btn-default");var e=$(s).find("input[name='musDownloadLink']").val();$.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"updateFileDescription",downloadLink:e,fileDescription:""},success:function(e){e.error?new PNotify({title:p.lang_errors_occurred,text:e.error,type:"error"}):new PNotify({text:p.lang_success_removed_file_description,type:"success"})}})}),!1}),$("#multiUploadSucceeded").on("input","input[name='musFileDescription']",function(){var e=$(this).parent().find(".js-btn-save-file-description");$(e).hasClass("disabled")&&$(e).removeClass("disabled btn-default").addClass("btn-primary")}),$("#multiUploadSucceeded").on("keydown","input[name='musFileDescription']",function(e){var t=$(this).parent().find(".js-btn-save-file-description");$(t).hasClass("disabled")||13!=e.keyCode||$(t).trigger("click")}),$("#multiUploadSucceeded").on("click",".js-btn-save-file-description",function(){var t=this,e=$(this).closest(".multiItem"),s=$(e).find("input[name='musFileDescription']").val(),a=$(e).find("input[name='musDownloadLink']").val();return $.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",async:!1,data:{action:"updateFileDescription",downloadLink:a,fileDescription:s},success:function(e){e.error?new PNotify({title:p.lang_errors_occurred,text:e.error,type:"error"}):(new PNotify({text:p.lang_success_updated_file_description,type:"success"}),$(t).removeClass("btn-primary").addClass("btn-success"),$(t).find("i").removeClass("fa-save").addClass("fa-check"),setTimeout(function(){$(t).addClass("disabled btn-default").removeClass("btn-success"),$(t).find("i").addClass("fa-save").removeClass("fa-check")},750))}}),!1}),$(".panel-sfs-settings").length&&(1<$(".panel-sfs-settings").length&&($(".panel-sfs-settings:not(:first) > .panel-body").hide(),$(".panel-sfs-settings:not(:first) > .panel-title i[class*='chevron']").removeClass("fa-chevron-up").addClass("fa-chevron-down")),$(".panel-sfs-settings > .panel-heading").click(function(){var e=$(this).closest(".panel-sfs-settings");$(".panel-body",e).is(":visible")?$(".panel-body",e).slideUp(400,function(){$(".panel-title i[class*='chevron']",e).removeClass("fa-chevron-up").addClass("fa-chevron-down")}):$(".panel-body",e).slideDown(400,function(){$(".panel-title i[class*='chevron']",e).removeClass("fa-chevron-down").addClass("fa-chevron-up")})})),$("form#fConfigTimezone").length&&($("select.chosen").chosen({placeholder_text_single:"--- Please select ---",search_contains:!0,width:"100%"}),$(".js-btn-open-tz-helper").click(function(){var t;return $.ajax({type:"POST",url:"functions.ajax.php",dataType:"json",data:{action:"getTZhelper"},async:!1,success:function(e){e.tzData&&(t='<div class="col-xs-12"><div class="panel panel-info"><div class="panel-heading"><h3 class="panel-title">Webserver</h3></div><div class="panel-body"><dl class="dl-horizontal"><dt>Datetime</dt><dd>'+e.tzData.wsdate+"</dd><dt>Timezone</dt><dd>"+e.tzData.date_default_timezone_get+'</dd></dl></div><div class="panel-heading"><h3 class="panel-title">Database Server</h3></div><div class="panel-body"><dl class="dl-horizontal"><dt>Datetime</dt><dd>'+e.tzData.dbdate+"</dd><dt>Timezone</dt><dd>"+e.tzData.dbtz+"</dd></dl></div></div>"+e.tzHint+'</div><div class="clearfix"></div>')}}),t=t||'<div class="alert alert-danger">Something went wrong<br />Please consult the webservers error_log</div>',bootbox.alert({title:"SFS Timezone Helper",message:t}),!1}),$("select[name='timezone']").change(function(){$(".js-btn-save-timezone").fadeIn()}),$(".js-btn-save-timezone").click(function(){var t=$(this).closest(".save-status-block"),e=$("select[name='timezone']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_timezone",timezone:e},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){setTimeout(function(){$(".text-success",t).fadeOut()},1500)})})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),!1}),$(".btn-group-select-timezone-correction ul a").click(function(){var e=$(this).closest(".btn-group-select-timezone-correction"),t=$(e).attr("data-field-name"),s=$(this).closest("li").attr("data-value");return $("ul li",e).removeClass("active"),$("button .selected-option",e).html($(this).html()),$(this).closest("li").addClass("active"),$("ul",e).dropdown("toggle"),$("input[name='"+t+"']").val(s),$(".js-btn-save-db_timezoneCorrection").fadeIn(),!1}),$(".js-btn-save-db_timezoneCorrection").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='db_timezoneCorrection_direction']").val(),s=$("input[name='db_timezoneCorrection_hours']").val(),a=$("input[name='db_timezoneCorrection_minutes']").val(),n=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_db_timezoneCorrection",direction:e,hours:s,minutes:a},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(n).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){setTimeout(function(){$(".text-success",t).fadeOut()},1500)})})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),!1})),$("form#fConfigDownload").length&&($(".js-btn-xsendfile").click(function(){var t=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_xsendfile"},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),1==e.XSendFile?($(t).addClass("btn-success").removeClass("btn-default"),$("i",t).addClass("fa-check-square-o").removeClass("fa-square-o")):($(t).addClass("btn-default").removeClass("btn-success"),$("i",t).addClass("fa-square-o").removeClass("fa-check-square-o")))}}),!1}),$("input[name='kbps']").on("change keydown",function(){$(".js-btn-save-kbps").fadeIn()}),$(".js-btn-save-kbps").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='kbps']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_kbps",kbps:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='kbps']").val(e.kbps),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1}),$("input[name='delDays']").on("change keydown",function(){$(".js-btn-save-deldays").fadeIn()}),$(".js-btn-save-deldays").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='delDays']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_deldays",delDays:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='delDays']").val(e.delDays),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1}),$("select[name='delOn'].chosen").chosen({disable_search:!0,width:"100%"}),$("select[name='delOn']").change(function(){$(".js-btn-save-delon").fadeIn()}),$(".js-btn-save-delon").click(function(){var t=$(this).closest(".save-status-block"),e=$("select[name='delOn']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_delon",delOn:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1}),$("input[name='delDownloadsNumbers']").on("change keydown",function(){$(".js-btn-save-deldownloadsnumbers").fadeIn()}),$(".js-btn-save-deldownloadsnumbers").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='delDownloadsNumbers']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_deldownloadsnumbers",delDownloadsNumbers:e},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='delDownloadsNumbers']").val(e.delDownloadsNumbers),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),!1}),$(".js-btn-delsettingsbyuploader").click(function(){var t=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_delsettingsbyuploader"},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),1==e.delSettingsByUploader?($(t).addClass("btn-success").removeClass("btn-default"),$("i",t).addClass("fa-check-square-o").removeClass("fa-square-o")):($(t).addClass("btn-default").removeClass("btn-success"),$("i",t).addClass("fa-square-o").removeClass("fa-check-square-o")))}}),!1}),$("select[name='downloadProtection'].chosen").chosen({disable_search:!0,width:"100%"}),$("select[name='downloadProtection']").change(function(){$(".js-btn-save-downloadprotection").fadeIn()}),$(".js-btn-save-downloadprotection").click(function(){var t=$(this).closest(".save-status-block"),e=$("select[name='downloadProtection']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_downloadprotection",downloadProtection:e},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){setTimeout(function(){$(".text-success",t).fadeOut()},1500)})})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),!1}),$(".js-btn-passwordprotection").click(function(){var t=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_passwordprotection"},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),1==e.passwordProtection?($(t).addClass("btn-success").removeClass("btn-default"),$("i",t).addClass("fa-check-square-o").removeClass("fa-square-o")):($(t).addClass("btn-default").removeClass("btn-success"),$("i",t).addClass("fa-square-o").removeClass("fa-check-square-o")))}}),!1}),$("input[name='downloadSeconds']").on("change keydown",function(){$(".js-btn-save-downloadseconds").fadeIn()}),$(".js-btn-save-downloadseconds").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='downloadSeconds']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_downloadseconds",downloadSeconds:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='downloadSeconds']").val(e.downloadSeconds),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1})),$("form#fConfigUpload").length&&($("input[name='maxFileSize']").on("change keydown",function(){$(".js-btn-save-maxfilesize").fadeIn()}),$(".js-btn-save-maxfilesize").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='maxFileSize']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_maxfilesize",maxFileSize:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='maxFileSize']").val(e.maxFileSize),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1}),$(".js-btn-multiupload").click(function(){var t=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_multiupload"},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),1==e.multiUpload?($(t).addClass("btn-success").removeClass("btn-default"),$("i",t).addClass("fa-check-square-o").removeClass("fa-square-o"),$(".additional-multi-upload-settings").slideDown()):($(t).addClass("btn-default").removeClass("btn-success"),$("i",t).addClass("fa-square-o").removeClass("fa-check-square-o"),$(".additional-multi-upload-settings").slideUp()))}}),!1}),$("input[name='maxMultiFiles']").on("change keydown",function(){$(".js-btn-save-maxmultifiles").fadeIn()}),$(".js-btn-save-maxmultifiles").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='maxMultiFiles']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_maxmultifiles",maxMultiFiles:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='maxMultiFiles']").val(e.maxMultiFiles),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1}),$(".js-btn-addanotherfiles").click(function(){var t=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_addanotherfiles"},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),1==e.addAnotherFiles?($(t).addClass("btn-success").removeClass("btn-default"),$("i",t).addClass("fa-check-square-o").removeClass("fa-square-o")):($(t).addClass("btn-default").removeClass("btn-success"),$("i",t).addClass("fa-square-o").removeClass("fa-check-square-o")))}}),!1}),$("input[name='extAllowed']").on("change keydown",function(){$(".js-btn-save-extallowed").fadeIn()}),$(".js-btn-save-extallowed").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='extAllowed']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_extallowed",extAllowed:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='extAllowed']").val(e.extAllowed),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1}),$("input[name='extDenied']").on("change keydown",function(){$(".js-btn-save-extdenied").fadeIn()}),$(".js-btn-save-extdenied").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='extDenied']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_extdenied",extDenied:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='extDenied']").val(e.extDenied),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1}),$("input[name='maxRcpt']").on("change keydown",function(){$(".js-btn-save-maxrcpt").fadeIn()}),$(".js-btn-save-maxrcpt").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='maxRcpt']").val(),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_maxrcpt",maxRcpt:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(s).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='maxRcpt']").val(e.maxRcpt),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1}),$(".js-btn-imagepreview").click(function(){var t=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_imagepreview"},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),1==e.imagePreview?($(t).addClass("btn-success").removeClass("btn-default"),$("i",t).addClass("fa-check-square-o").removeClass("fa-square-o"),$(".additional-image-dimensions-settings").slideDown()):($(t).addClass("btn-default").removeClass("btn-success"),$("i",t).addClass("fa-square-o").removeClass("fa-check-square-o"),$(".additional-image-dimensions-settings").slideUp()))}}),!1}),$("input[name='prevWidth'],input[name='prevHeight']").on("change keydown",function(){$(".js-btn-save-image-dimensions").fadeIn()}),$(".js-btn-save-image-dimensions").click(function(){var t=$(this).closest(".save-status-block"),e=$("input[name='prevWidth']").val(),s=$("input[name='prevHeight']").val(),a=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_imagedimensions",prevHeight:s,prevWidth:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(a).fadeOut(400,function(){$(".text-success",t).fadeIn(400,function(){$("input[name='prevWidth']").val(e.prevWidth),$("input[name='prevHeight']").val(e.prevHeight),setTimeout(function(){$(".text-success",t).fadeOut()},1500)})}))}}),!1}),$(".js-btn-adminonlyuploads").click(function(){var t=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_adminonlyuploads"},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),1==e.adminOnlyUploads?($(t).addClass("btn-success").removeClass("btn-default"),$("i",t).addClass("fa-check-square-o").removeClass("fa-square-o")):($(t).addClass("btn-default").removeClass("btn-success"),$("i",t).addClass("fa-square-o").removeClass("fa-check-square-o")))}}),!1})),$("form#fConfigShortUrls").length&&($("select[name='shortUrls']").on("change",function(){var e=$("select[name='shortUrls']").val();0==e?($(".disable-shortener .js-btn-save-shortener").fadeIn(),$(".shortener-block").slideUp()):($(".disable-shortener .js-btn-save-shortener").fadeOut(),$(".shortener-block:not([data-shortener='"+e+"'])").slideUp(400,function(){$(".shortener-block[data-shortener='"+e+"']").slideDown(),$(".shortener-block[data-shortener='"+e+"'] .js-btn-save-shortener").fadeIn()}))}),b=$("select[name='shortUrls']").val(),$(".shortener-block[data-shortener='"+b+"'] input,.shortener-block[data-shortener='"+b+"'] select").on("change keydown",function(){$(".shortener-block[data-shortener='"+b+"'] .js-btn-save-shortener").fadeIn()}),$(".js-btn-save-shortener").click(function(){var e=$("select[name='shortUrls']").val(),t=$(this),s=$(this).closest(".save-status-block"),a=$("input[name='bitlyUser']").val(),n=$("input[name='bitlyKey']").val(),o=$("input[name='adflyUid']").val(),i=$("input[name='adflyKey']").val(),l=$("select[name='adflyAdvertType']").val(),c="curl";return"bitly"!=e&&"adfly"!=e||(c=$(".shortener-block[data-shortener='"+e+"'] select[name='connectionMethod']").val()),$.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_shorturls",shortUrls:e,bitlyUser:a,bitlyKey:n,adflyUid:o,adflyKey:i,adflyAdvertType:l,connectionMethod:c},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(t).fadeOut(400,function(){$(".text-success",s).fadeIn(400,function(){setTimeout(function(){$(".text-success",s).fadeOut()},1500)})}))}}),!1})),$("form#fConfigMail").length&&($("input[name='admin_mail']").on("change keydown",function(){$(".js-btn-save-admin_mail").fadeIn()}),$(".js-btn-save-admin_mail").click(function(){var t=$(this),s=$(this).closest(".save-status-block"),e=$("input[name='admin_mail']").val();return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_admin_mail",admin_mail:e},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(t).fadeOut(400,function(){$(".text-success",s).fadeIn(400,function(){$("input[name='admin_mail']").val(e.admin_mail),setTimeout(function(){$(".text-success",s).fadeOut()},1500)})})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),!1}),$("input[name='automaileraddr']").on("change keydown",function(){$(".js-btn-save-automaileraddr").fadeIn()}),$(".js-btn-save-automaileraddr").click(function(){var t=$(this),s=$(this).closest(".save-status-block"),e=$("input[name='automaileraddr']").val();return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_automaileraddr",automaileraddr:e},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(t).fadeOut(400,function(){$(".text-success",s).fadeIn(400,function(){$("input[name='automaileraddr']").val(e.automaileraddr),setTimeout(function(){$(".text-success",s).fadeOut()},1500)})})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),!1}),$("input[name='contact_mail']").on("change keydown",function(){$(".js-btn-save-contact_mail").fadeIn()}),$(".js-btn-save-contact_mail").click(function(){var t=$(this),s=$(this).closest(".save-status-block"),e=$("input[name='contact_mail']").val();return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_contact_mail",contact_mail:e},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(t).fadeOut(400,function(){$(".text-success",s).fadeIn(400,function(){$("input[name='contact_mail']").val(e.contact_mail),setTimeout(function(){$(".text-success",s).fadeOut()},1500)})})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),!1}),$("input[name='mailParams']").on("change keydown",function(){$(".js-btn-save-mailparams").fadeIn()}),$(".js-btn-save-mailparams").click(function(){var t=$(this),s=$(this).closest(".save-status-block"),e=$("input[name='mailParams']").val();return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"save_mailparams",mailParams:e},success:function(e){e.success&&(new PNotify({text:e.success,type:"success",history:!1}),$(t).fadeOut(400,function(){$(".text-success",s).fadeIn(400,function(){$("input[name='mailParams']").val(e.mailParams),setTimeout(function(){$(".text-success",s).fadeOut()},1500)})}))}}),!1})),$(".table-sfs-mods").length&&($(".js-btn-mod-install").click(function(){var t=$(this).closest("tr"),s=$(t).data("modname"),a=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"install_mod",modname:s},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(a).closest("li").hide(),$(".js-btn-mod-disable,.js-btn-mod-uninstall,.js-btn-mod-healthcheck",t).closest("li").show(),$(".modState .stat_inst",t).text("installed (V"+e.version.toFixed(2)+")"),$(".modState .stat_stat",t).addClass("text-success").removeClass("text-danger").fadeIn(),$(".modState .stat_stat span",t).text("enabled"),$(".list-group-modules-sidemen a.list-group-item[data-modname='"+s+"']").removeClass("disabled"),$("td.table-cell-modname-link",t).wrapInner("<a href='"+$(t).data("href")+"'></a>"),e.installationInstructions&&bootbox.dialog({title:"Additional Installation Instructions",message:e.installationInstructions,className:"bb-800",buttons:{close:{label:"OK",className:"btn-primary dont-focus"}}})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),$(a).closest(".dropdown-menu").dropdown("toggle"),!1}),$(".js-btn-mod-uninstall").click(function(){var t=$(this).closest("tr"),s=$(t).data("modname"),a=$(this);return bootbox.confirm("<h4>Are you sure to uninstall this module?</h4><div class='alert alert-info'>This Action cannot be undone!</div>When starting the uninstallation process the mod the corresponding tables and fields in the database and maybe some files will be removed or modified and last information to completely uninstall the mod will be displayed.",function(e){e&&$.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"uninstall_mod",modname:s},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(a).closest("li").hide(),$(".js-btn-mod-disable,.js-btn-mod-enable,.js-btn-mod-healthcheck",t).closest("li").hide(),$(".js-btn-mod-install",t).closest("li").show(),$(".modState .stat_inst",t).text("not installed"),$(".modState .stat_stat",t).fadeOut(),$(".list-group-modules-sidemen a.list-group-item[data-modname='"+s+"']").addClass("disabled"),$("td.table-cell-modname-link",t).find("a").contents().unwrap(),e.uninstallInstructions&&bootbox.dialog({title:"Additional Uninstall Instructions",message:e.uninstallInstructions,className:"bb-800",buttons:{close:{label:"OK",className:"btn-primary dont-focus"}}})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}})}),$(a).closest(".dropdown-menu").dropdown("toggle"),!1}),$(".js-btn-mod-disable,.js-btn-mod-enable").click(function(){var t=$(this).closest("tr"),e=$(t).data("modname"),s=$(this),a=$(s).data("status");return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"change_mod_status",modname:e,status:a},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),1==a?($(".modState .stat_stat span",t).text("enabled"),$(".modState .stat_stat",t).addClass("text-success").removeClass("text-danger"),$(".js-btn-mod-disable",t).closest("li").show(),$(".js-btn-mod-enable",t).closest("li").hide()):($(".modState .stat_stat span",t).text("disabled"),$(".modState .stat_stat",t).addClass("text-danger").removeClass("text-success"),$(".js-btn-mod-disable",t).closest("li").hide(),$(".js-btn-mod-enable",t).closest("li").show())):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),$(s).closest(".dropdown-menu").dropdown("toggle"),!1}),$(".js-btn-mod-remove").click(function(){var t=$(this).closest("tr"),s=$(t).data("modname"),e=$(this);return bootbox.confirm("<h4>Are you suer to remove this module?</h4><div class='alert alert-info'>This Action cannot be undone!</div>When starting the removal process the mod the corresponding tables and fields in the database and maybe some files will be removed or modified and last information to completely remove the mod displayed.",function(e){e&&$.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"remove_mod",modname:s},success:function(e){e.success?(new PNotify({text:e.success,type:"success",history:!1}),$(".js-btn-mod-disable,.js-btn-mod-enable,.js-btn-mod-healthcheck",t).closest("li").hide(),$(".js-btn-mod-install",t).closest("li").show(),$(".modState .stat_inst",t).text("not installed"),$(".modState .stat_stat",t).fadeOut(),$(".list-group-modules-sidemen a.list-group-item[data-modname='"+s+"']").addClass("disabled"),$("td.table-cell-modname-link",t).find("a").contents().unwrap(),e.removalInstructions&&bootbox.dialog({title:"Additional Removal Instructions",message:e.removalInstructions,className:"bb-800",buttons:{close:{label:"OK",className:"btn-primary dont-focus"}}})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}})}),$(e).closest(".dropdown-menu").dropdown("toggle"),!1}),$(".js-btn-mod-healthcheck").click(function(){var e=$(this).closest("tr"),t=$(e).data("modname"),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"healthcheck_mod",modname:t},success:function(e){e.healthCheckResults?e.healthCheckResults&&bootbox.dialog({title:"Mod Health Check Results",className:"bb-800",message:e.healthCheckResults,buttons:{close:{label:"OK",className:"btn-primary dont-focus"}}}):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),$(s).closest(".dropdown-menu").dropdown("toggle"),!1}),$(".js-btn-mod-manual").click(function(){var e=$(this).closest("tr"),t=$(e).data("modname"),s=$(this);return $.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"mod_manual",modname:t},success:function(e){e.modManual?e.modManual&&bootbox.dialog({className:"bb-800",title:"Mod Manual",message:e.modManual,buttons:{close:{label:"OK",className:"btn-primary dont-focus"}}}):e.error&&new PNotify({text:e.error,type:"error",history:!1})}}),$(s).closest(".dropdown-menu").dropdown("toggle"),!1})),$(".list-group-error-log").length&&($("li[data-loggroup]").hide(),$(".js-btn-toggle-logitems-view").click(function(){var e=$(this).data("loggroup-target"),t=$(this);$("i",t).toggleClass("fa-chevron-down fa-chevron-up"),$("li[data-loggroup='"+e+"']").slideToggle(400,function(){$(this).is(":visible")?$("span",t).text($(t).data("text-less")):$("span",t).text($(t).data("text-more"))})}),$(".js-btn-remove-logitems").click(function(){var t=$(this).data("loggroup-delkey"),s=$(this).closest("li.list-group-item");$.ajax({type:"POST",async:!1,dataType:"json",url:"functions.ajax.php",data:{action:"removeLogEntries",logGroup:t},success:function(e){e.success?($("li[data-loggroup='"+t+"']").fadeOut(400,function(){$(this).remove()}),$(s).fadeOut(400,function(){$(this).remove(),0===$("ul.list-group-error-log li").length&&($("ul.list-group-error-log").fadeOut(),$(".alert-no-log-entries").fadeIn())}),new PNotify({text:e.success,type:"success",history:!1})):e.error&&new PNotify({text:e.error,type:"error",history:!1})}})}))});
